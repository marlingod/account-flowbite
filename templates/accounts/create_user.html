{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "Create User" %} - LMS Platform{% endblock %}

{% block content %}
<div class="pb-6">
    <div class="flex items-center">
        <a href="{% url 'user_list' %}" class="text-blue-600 dark:text-blue-500 hover:underline mr-2">
            <i class="fas fa-arrow-left"></i> {% trans "Back to Users" %}
        </a>
    </div>
    <h1 class="text-3xl font-bold text-gray-900 dark:text-white mt-4">{% trans "Create New User" %}</h1>
    <p class="text-gray-600 dark:text-gray-400">{% trans "Add a new user to the system" %}</p>
</div>

<div class="bg-white rounded-lg shadow p-6 dark:bg-gray-800 max-w-3xl mx-auto">
    <form method="post">
        {% csrf_token %}
        
        {% if form.non_field_errors %}
        <div class="p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert">
            {% for error in form.non_field_errors %}
            <p>{{ error }}</p>
            {% endfor %}
        </div>
        {% endif %}
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div>
                <label for="{{ form.username.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                    {{ form.username.label }}{% if form.username.field.required %} *{% endif %}
                </label>
                {{ form.username }}
                {% if form.username.errors %}
                <p class="mt-2 text-sm text-red-600 dark:text-red-500">{{ form.username.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div>
                <label for="{{ form.email.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                    {{ form.email.label }}{% if form.email.field.required %} *{% endif %}
                </label>
                {{ form.email }}
                {% if form.email.errors %}
                <p class="mt-2 text-sm text-red-600 dark:text-red-500">{{ form.email.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div>
                <label for="{{ form.first_name.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                    {{ form.first_name.label }}{% if form.first_name.field.required %} *{% endif %}
                </label>
                {{ form.first_name }}
                {% if form.first_name.errors %}
                <p class="mt-2 text-sm text-red-600 dark:text-red-500">{{ form.first_name.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div>
                <label for="{{ form.last_name.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                    {{ form.last_name.label }}{% if form.last_name.field.required %} *{% endif %}
                </label>
                {{ form.last_name }}
                {% if form.last_name.errors %}
                <p class="mt-2 text-sm text-red-600 dark:text-red-500">{{ form.last_name.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div>
                <label for="{{ form.user_type.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                    {{ form.user_type.label }}{% if form.user_type.field.required %} *{% endif %}
                </label>
                {{ form.user_type }}
                {% if form.user_type.errors %}
                <p class="mt-2 text-sm text-red-600 dark:text-red-500">{{ form.user_type.errors.0 }}</p>
                {% endif %}
                <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
                    {% trans "Define the user's role in the system" %}
                </p>
            </div>
            
            <div>
                <label for="{{ form.password.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                    {{ form.password.label }}{% if form.password.field.required %} *{% endif %}
                </label>
                {{ form.password }}
                {% if form.password.errors %}
                <p class="mt-2 text-sm text-red-600 dark:text-red-500">{{ form.password.errors.0 }}</p>
                {% endif %}
                <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
                    {{ form.password.help_text }}
                </p>
            </div>
        </div>
        
        <div class="mb-6">
            <div class="flex items-center">
                {{ form.send_welcome_email }}
                <label for="{{ form.send_welcome_email.id_for_label }}" class="ml-2 text-sm font-medium text-gray-900 dark:text-white">
                    {{ form.send_welcome_email.label }}
                </label>
            </div>
            <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
                {% trans "Send an email with account details and password reset link" %}
            </p>
        </div>
        
        <div class="flex items-center justify-end space-x-3">
            <a href="{% url 'user_list' %}" class="text-gray-900 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700">
                {% trans "Cancel" %}
            </a>
            <button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">
                {% trans "Create User" %}
            </button>
        </div>
    </form>
</div>
{% endblock %}